# 压缩版本
```javascript
/**
 * uploadAndPreviewPlugin v1.0.0
 * 
 * Copyright (c) 2025 Cedar WU
 * All rights reserved.
 *
 */
!function(t){var i="uploadAndPreview",e={title:"未设置标题",upload:function(){}},a={init(a){return this.each((function(){var l=t(this),n=Object.assign({},e,a),s=Math.random().toString().substring(2,9),d="dialog-"+s,o="tab-"+s,c="dialog-preview-"+s;l.html(`\n                              <div class="${d} easyui-dialog"  style="width:800px;height:500px;"\n                                data-options="iconCls:'icon-save',resizable:true,modal:true,maximizable:true" closed="false">\n                                <div class="${c}"></div>\n                                <div style="padding:1vh">\n                                    <label class="easyui-linkbutton">\n                                        上传附件\n                                        <input type="file" class="upload-file-input-${s}" multiple accept="image/*" style="display:none;" />\n                                    </label>\n                                </div>\n                                <div class="${o} easyui-tabs" style="width:100%;height:85%;"></div>\n                            </div>\n                        `),t("."+d).dialog({title:n.title,closed:!n.initShow,modal:!0,resizable:!0,maximizable:!0}),t("."+c).dialog({title:"预览",width:.8*window.innerWidth,height:.8*window.innerHeight,closed:!0,modal:!0,resizable:!0,maximizable:!0,content:'<div class="media"></div>',onBeforeClose:function(){t("."+c).find(".media").html("")}}),t(document).on("click",".preview-li-"+s,(function(){const i=t(this).data("type"),e=t(this).find(".media-item").attr("src");"image"===i?t("."+c).find(".media").html(`<img class="preview-img" src="${e}" style="width:100%;" src="" alt="" / >`):"video"===i&&t("."+c).find(".media").html(`<video autoplay controls class="preview-img" src="${e}" style="width:100%;" src="" alt="" />`),t("."+c).dialog("open")})),t(document).on("change",".upload-file-input-"+s,(function(t){"function"==typeof n.upload&&n.upload.call(l,t.target.files)})),l.data(i,{title:n.title,setting:n,id:s,dialogId:d,tabId:o,dialogPreviewId:c})}))},show(){return this.each((function(){var e=t(this).data(i);t("."+e.dialogId).dialog("open")}))},hide(){return this.each((function(){var e=t(this).data(i);t("."+e.dialogId).dialog("close")}))},setData(e){thisElement=t(this),thisElementData=thisElement.data(i);const a=t("."+thisElementData.tabId);a.tabs({border:!1});const l=a.tabs("tabs");for(let t=l.length-1;t>=0;t--){const i=l[t].panel("options").title;a.tabs("close",i)}e.forEach(((t,i)=>{a.tabs("add",{title:t.title,content:`\n                            <ul style="margin:0;padding:2vh;display:flex;flex-wrap:wrap;">\n                                ${t.files.map((t=>`\n                                    <li class="preview-li-${thisElementData.id}" data-type="${t.type}" style="padding:0.5vh;width:25%;height:20vh;list-style:none;cursor:pointer;position:relative;flex-shrink:0">\n                                        <div style="height:100%;width:100%;position:relative;border:1px solid #ddd;">\n                                            ${"image"===t.type?`<img class="media-item" style="width:100%;height:100%;object-fit:cover;" src="${t.filePath}" alt="" />`:`<video class="media-item" style="width:100%;height:100%;object-fit:cover;" src="${t.filePath}" alt=""></video>`}\n                                                <div style="display:${t.text?"block":"none"};position:absolute;bottom:0;left:0;width:100%;padding:0.5vh 0;background-color:rgba(0,0,0,0.5);color:#fff;text-align:center;z-index:9">\n                                                    ${t.text||""}\n                                                </div>\n                                        </div>\n                                    </li>\n                                `)).join("")}\n                            </ul>\n                        `})})),a.tabs("select",0)}};t.fn[i]=function(t){a[t]?a[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t||a.init.apply(this,arguments)}}(jQuery);
```